---
date: "2022-02-05"
title: "Proj 2048"
thumbnail: "img/blog/proj-2048/2048-board.png"
categories:
- "Proj 2048"
tags:
- "2048"
- "Golang"
- "Ebiten"
- "ECS"
- "Gaming agent"
---

A few years ago Gabriele Cirulli developed a sliding puzzle where the goal is to grow tiles and get up to 2048. My
‚ÄúProj 2048‚Äù is about implementing several agents to play. Which should get tiles up to 4096 or maybe even 64536 (if
it‚Äôs possible of course) üòâ.
<!--more-->
As a start point, I implemented elementary clockwise and anticlockwise agents, I was surprised how easy they can get the
tile with 256 scores. My first few games stuck on 128.

Let get to implementation details.

### Technologies

Of course Go lang based. The [Ebiten](https://ebiten.org/) as most popular and most advanced 2D game engine available for
Go lang. The [gg](https://github.com/fogleman/gg#examples) library helps a lot with 2D drawing and preparation sprites.

### Architecture

Entity Component System (ESC) pattern.

### Agent interface

```go {hl_lines=[8]}
type Agent interface {
	GetId() string
	GetName() string
	IsManual() bool
	GetGameId() int64
	GetGameSeed() int64

	MakeMove(step int, score int, noMove bool, valueList []int) common.Direction

	GameFinished(step int, score int, noMove bool, valueList []int, d common.Direction)

	LogStep(step int, score int, noMove bool, valueList []int, d common.Direction) error
}
```

The agent has to make decision about next move base on current game state `valueList` and some other values such as `noMove` flag (`true` if was not possible to move by previous try, ie full board but collapsible vertically, but tried to move horizontally) or game `step` number.

The direction

```go
type Direction string

const (
	NoDirection Direction = "no_direction"
	Up                    = "up"
	Right                 = "right"
	Down                  = "down"
	Left                  = "left"
)
```
